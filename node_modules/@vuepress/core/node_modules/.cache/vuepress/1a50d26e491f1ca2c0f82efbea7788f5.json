{"remainingRequest":"D:\\desk\\bjcac\\jobsessionDocument\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\desk\\bjcac\\jobsessionDocument\\node_modules\\vuepress-theme-vt\\plugins\\fulltext-search\\components\\SearchBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\desk\\bjcac\\jobsessionDocument\\node_modules\\vuepress-theme-vt\\plugins\\fulltext-search\\components\\SearchBox.vue","mtime":499162500000},{"path":"D:\\desk\\bjcac\\jobsessionDocument\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\desk\\bjcac\\jobsessionDocument\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\desk\\bjcac\\jobsessionDocument\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\desk\\bjcac\\jobsessionDocument\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBmbGV4c2VhcmNoU3ZjIGZyb20gIi4uL3NlcnZpY2VzL2ZsZXhzZWFyY2hTdmMiOwppbXBvcnQgSWNvblNlYXJjaCBmcm9tICIuL0ljb25TZWFyY2gudnVlIjsKaW1wb3J0IFNlYXJjaENvbW1hbmQgZnJvbSAiLi9TZWFyY2hDb21tYW5kLnZ1ZSI7CgovLyBzZWUgaHR0cHM6Ly92dWVwcmVzcy52dWVqcy5vcmcvcGx1Z2luL29wdGlvbi1hcGkuaHRtbCNjbGllbnRkeW5hbWljbW9kdWxlcwppbXBvcnQgaG9va3MgZnJvbSAiQGR5bmFtaWMvaG9va3MiOwoKLyogZ2xvYmFsIFNFQVJDSF9NQVhfU1VHR0VTVElPTlMsIFNFQVJDSF9QQVRIUywgU0VBUkNIX0hPVEtFWVMgKi8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTZWFyY2hCb3giLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBxdWVyeTogIiIsCiAgICAgIGZvY3VzZWQ6IGZhbHNlLAogICAgICBmb2N1c0luZGV4OiAwLAogICAgICBzdWdnZXN0aW9uczogbnVsbCwKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBJY29uU2VhcmNoLAogICAgU2VhcmNoQ29tbWFuZCwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBxdWVyeVRlcm1zKCkgewogICAgICBpZiAoIXRoaXMucXVlcnkpIHJldHVybiBbXTsKICAgICAgY29uc3QgcmVzdWx0ID0gZmxleHNlYXJjaFN2YwogICAgICAgIC5ub3JtYWxpemVTdHJpbmcodGhpcy5xdWVyeSkKICAgICAgICAuc3BsaXQoL1teXHB7TH1ccHtOfV9dKy9pdSkKICAgICAgICAuZmlsdGVyKCh0KSA9PiB0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICBzaG93U3VnZ2VzdGlvbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLmZvY3VzZWQgJiYgdGhpcy5zdWdnZXN0aW9ucyAmJiB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aDsKICAgIH0sCgogICAgLy8gbWFrZSBzdWdnZXN0aW9ucyBhbGlnbiByaWdodCB3aGVuIHRoZXJlIGFyZSBub3QgZW5vdWdoIGl0ZW1zCiAgICBhbGlnblJpZ2h0KCkgewogICAgICBjb25zdCBuYXZDb3VudCA9ICh0aGlzLiRzaXRlLnRoZW1lQ29uZmlnLm5hdiB8fCBbXSkubGVuZ3RoOwogICAgICBjb25zdCByZXBvID0gdGhpcy4kc2l0ZS5yZXBvID8gMSA6IDA7CiAgICAgIHJldHVybiBuYXZDb3VudCArIHJlcG8gPD0gMjsKICAgIH0sCiAgICBwbGFjZWhvbGRlcigpIHsKICAgICAgcmV0dXJuICgKICAgICAgICB0aGlzLiRsb2NhbGVDb25maWcuc2VhcmNoUGxhY2Vob2xkZXIgfHwKICAgICAgICB0aGlzLiRzaXRlLnRoZW1lQ29uZmlnLnNlYXJjaFBsYWNlaG9sZGVyIHx8CiAgICAgICAgIlNlYXJjaCIKICAgICAgKTsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgcXVlcnkoKSB7CiAgICAgIHRoaXMuZ2V0U3VnZ2VzdGlvbnMoKTsKICAgIH0sCiAgICAkbG9jYWxlUGF0aCgpIHsKICAgICAgdGhpcy5iaW5kSW5kZXhQYWdlcygpOwogICAgfSwKICB9LAogIC8qIGdsb2JhbCBPUFRJT05TICovCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuYmluZEluZGV4UGFnZXMoKTsKICAgIC8vIHNldCBxdWVyeSBmcm9tIFVSTAogICAgY29uc3QgcGFyYW1zID0gdGhpcy51cmxQYXJhbXMoKTsKICAgIGlmIChwYXJhbXMpIHsKICAgICAgY29uc3QgcXVlcnkgPSBwYXJhbXMuZ2V0KCJxdWVyeSIpOwogICAgICBpZiAocXVlcnkpIHsKICAgICAgICB0aGlzLnF1ZXJ5ID0gZGVjb2RlVVJJKHF1ZXJ5KTsKICAgICAgICB0aGlzLmZvY3VzZWQgPSB0cnVlOwogICAgICB9CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIHRoaXMub25Ib3RrZXkpOwogIH0sCiAgbWV0aG9kczogewogICAgYmluZEluZGV4UGFnZXMoKSB7CiAgICAgIGNvbnN0IG9wdGlvbnMgPSBPUFRJT05TIHx8IHt9OwogICAgICBjb25zdCBsb2NhbGVzID0gdGhpcy4kc2l0ZS5sb2NhbGVzOwoKICAgICAgLyoqCiAgICAgICAqIEhhbmRsZSBzZWFyY2ggc2NvcGUgZm9yIGkxOG4uCiAgICAgICAqLwogICAgICBpZiAodHlwZW9mIGxvY2FsZXMgPT09ICJvYmplY3QiKSB7CiAgICAgICAgY29uc3Qgbm9uTWF0Y2hlZExvY2FsZXMgPSBPYmplY3Qua2V5cyhsb2NhbGVzKS5maWx0ZXIoCiAgICAgICAgICAoa2V5KSA9PiBrZXkgIT09IHRoaXMuJGxvY2FsZVBhdGgKICAgICAgICApOwogICAgICAgIGNvbnN0IGluZGV4UGFnZXMgPSB0aGlzLiRzaXRlLnBhZ2VzLmZpbHRlcigocGFnZSkgPT4KICAgICAgICAgIG5vbk1hdGNoZWRMb2NhbGVzLmV2ZXJ5KChsb2NhbGUpID0+IHsKICAgICAgICAgICAgaWYgKGxvY2FsZSA9PT0gIi8iKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHBhZ2UucGF0aC5zdGFydHNXaXRoKHRoaXMuJGxvY2FsZVBhdGgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAhcGFnZS5wYXRoLnN0YXJ0c1dpdGgobG9jYWxlKTsKICAgICAgICAgIH0pCiAgICAgICAgKTsKICAgICAgICBmbGV4c2VhcmNoU3ZjLmJ1aWxkSW5kZXgoaW5kZXhQYWdlcywgb3B0aW9ucyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmxleHNlYXJjaFN2Yy5idWlsZEluZGV4KHRoaXMuJHNpdGUucGFnZXMsIG9wdGlvbnMpOwogICAgICB9CgogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgdGhpcy5vbkhvdGtleSk7CiAgICB9LAogICAgYXN5bmMgZ2V0U3VnZ2VzdGlvbnMoKSB7CiAgICAgIGlmICghdGhpcy5xdWVyeSB8fCAhdGhpcy5xdWVyeVRlcm1zLmxlbmd0aCkgewogICAgICAgIHRoaXMuc3VnZ2VzdGlvbnMgPSBbXTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IHN1Z2dlc3Rpb25zID0gYXdhaXQgZmxleHNlYXJjaFN2Yy5tYXRjaCgKICAgICAgICB0aGlzLnF1ZXJ5LAogICAgICAgIHRoaXMucXVlcnlUZXJtcywKICAgICAgICB0aGlzLiRzaXRlLnRoZW1lQ29uZmlnLnNlYXJjaE1heFN1Z2dlc3Rpb25zIHx8IFNFQVJDSF9NQVhfU1VHR0VTVElPTlMKICAgICAgKTsKICAgICAgaWYgKGhvb2tzLnByb2Nlc3NTdWdnZXN0aW9ucykgewogICAgICAgIC8vIGF1Z21lbnQgc3VnZ2VzdGlvbnMgd2l0aCB1c2VyLXByb3ZpZGVkIGZ1bmN0aW9uCiAgICAgICAgc3VnZ2VzdGlvbnMgPSBhd2FpdCBob29rcy5wcm9jZXNzU3VnZ2VzdGlvbnMoCiAgICAgICAgICBzdWdnZXN0aW9ucywKICAgICAgICAgIHRoaXMucXVlcnksCiAgICAgICAgICB0aGlzLnF1ZXJ5VGVybXMKICAgICAgICApOwogICAgICB9CiAgICAgIHRoaXMuc3VnZ2VzdGlvbnMgPSBzdWdnZXN0aW9ucy5tYXAoKHMpID0+ICh7CiAgICAgICAgLi4ucywKICAgICAgICBoZWFkaW5nRGlzcGxheTogaGlnaGxpZ2h0KHMuaGVhZGluZ1N0ciwgcy5oZWFkaW5nSGlnaGxpZ2h0KSwKICAgICAgICBjb250ZW50RGlzcGxheTogaGlnaGxpZ2h0KHMuY29udGVudFN0ciwgcy5jb250ZW50SGlnaGxpZ2h0KSwKICAgICAgfSkpOwogICAgfSwKICAgIGdldFBhZ2VMb2NhbGVQYXRoKHBhZ2UpIHsKICAgICAgZm9yIChjb25zdCBsb2NhbGVQYXRoIGluIHRoaXMuJHNpdGUubG9jYWxlcyB8fCB7fSkgewogICAgICAgIGlmIChsb2NhbGVQYXRoICE9PSAiLyIgJiYgcGFnZS5wYXRoLmluZGV4T2YobG9jYWxlUGF0aCkgPT09IDApIHsKICAgICAgICAgIHJldHVybiBsb2NhbGVQYXRoOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gIi8iOwogICAgfSwKICAgIGlzU2VhcmNoYWJsZShwYWdlKSB7CiAgICAgIGxldCBzZWFyY2hQYXRocyA9IFNFQVJDSF9QQVRIUzsKICAgICAgLy8gYWxsIHBhdGhzIHNlYXJjaGFibGVzCiAgICAgIGlmIChzZWFyY2hQYXRocyA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHNlYXJjaFBhdGhzID0gQXJyYXkuaXNBcnJheShzZWFyY2hQYXRocykKICAgICAgICA/IHNlYXJjaFBhdGhzCiAgICAgICAgOiBuZXcgQXJyYXkoc2VhcmNoUGF0aHMpOwogICAgICByZXR1cm4gKAogICAgICAgIHNlYXJjaFBhdGhzLmZpbHRlcigocGF0aCkgPT4gewogICAgICAgICAgcmV0dXJuIHBhZ2UucGF0aC5tYXRjaChwYXRoKTsKICAgICAgICB9KS5sZW5ndGggPiAwCiAgICAgICk7CiAgICB9LAogICAgb25Ib3RrZXkoZXZlbnQpIHsKICAgICAgaWYgKAogICAgICAgIGV2ZW50LnNyY0VsZW1lbnQgPT09IGRvY3VtZW50LmJvZHkgJiYKICAgICAgICBTRUFSQ0hfSE9US0VZUy5pbmNsdWRlcyhldmVudC5rZXkpCiAgICAgICkgewogICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuZm9jdXMoKTsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICB9LAogICAgb25VcCgpIHsKICAgICAgaWYgKHRoaXMuc2hvd1N1Z2dlc3Rpb25zKSB7CiAgICAgICAgaWYgKHRoaXMuZm9jdXNJbmRleCA+IDApIHsKICAgICAgICAgIHRoaXMuZm9jdXNJbmRleC0tOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmZvY3VzSW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCAtIDE7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgb25Eb3duKCkgewogICAgICBpZiAodGhpcy5zaG93U3VnZ2VzdGlvbnMpIHsKICAgICAgICBpZiAodGhpcy5mb2N1c0luZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggLSAxKSB7CiAgICAgICAgICB0aGlzLmZvY3VzSW5kZXgrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5mb2N1c0luZGV4ID0gMDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBnbyhpKSB7CiAgICAgIGlmICghdGhpcy5zaG93U3VnZ2VzdGlvbnMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGhvb2tzLm9uR29Ub1N1Z2dlc3Rpb24pIHsKICAgICAgICBjb25zdCByZXN1bHQgPSBob29rcy5vbkdvVG9TdWdnZXN0aW9uKAogICAgICAgICAgaSwKICAgICAgICAgIHRoaXMuc3VnZ2VzdGlvbnNbaV0sCiAgICAgICAgICB0aGlzLnF1ZXJ5LAogICAgICAgICAgdGhpcy5xdWVyeVRlcm1zCiAgICAgICAgKTsKICAgICAgICBpZiAocmVzdWx0ID09PSB0cnVlKSByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc3VnZ2VzdGlvbnNbaV0uZXh0ZXJuYWwpIHsKICAgICAgICB3aW5kb3cub3BlbigKICAgICAgICAgIHRoaXMuc3VnZ2VzdGlvbnNbaV0ucGF0aCArIHRoaXMuc3VnZ2VzdGlvbnNbaV0uc2x1ZywKICAgICAgICAgICJfYmxhbmsiCiAgICAgICAgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh0aGlzLnN1Z2dlc3Rpb25zW2ldLnBhdGggKyB0aGlzLnN1Z2dlc3Rpb25zW2ldLnNsdWcpOwogICAgICAgIHRoaXMucXVlcnkgPSAiIjsKICAgICAgICB0aGlzLmZvY3VzSW5kZXggPSAwOwogICAgICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlOwoKICAgICAgICAvLyByZXNldCBxdWVyeSBwYXJhbQogICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMudXJsUGFyYW1zKCk7CiAgICAgICAgaWYgKHBhcmFtcykgewogICAgICAgICAgcGFyYW1zLmRlbGV0ZSgicXVlcnkiKTsKICAgICAgICAgIGNvbnN0IHBhcmFtc1N0cmluZyA9IHBhcmFtcy50b1N0cmluZygpOwogICAgICAgICAgY29uc3QgbmV3U3RhdGUgPQogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyAocGFyYW1zU3RyaW5nID8gYD8ke3BhcmFtc1N0cmluZ31gIDogIiIpOwogICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgIiIsIG5ld1N0YXRlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBmb2N1cyhpKSB7CiAgICAgIHRoaXMuZm9jdXNJbmRleCA9IGk7CiAgICB9LAogICAgdW5mb2N1cygpIHsKICAgICAgdGhpcy5mb2N1c0luZGV4ID0gLTE7CiAgICB9LAogICAgdXJsUGFyYW1zKCkgewogICAgICBpZiAoIXdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTsKICAgIH0sCiAgICBleHBhbmRTZWFyY2hJbnB1dCgpIHsKICAgICAgdGhpcy4kcmVmcy5pbnB1dC5mb2N1cygpOwogICAgICB0aGlzLmZvY3VzZWQgPSB0cnVlOwogICAgfSwKICB9LAp9OwoKZnVuY3Rpb24gaGlnaGxpZ2h0KHN0ciwgc3RySGlnaGxpZ2h0KSB7CiAgaWYgKCFzdHIpIHJldHVybiB7fTsKICBpZiAoIXN0ckhpZ2hsaWdodCkgcmV0dXJuIHsgcHJlZml4OiBzdHIgfTsKICBjb25zdCBbc3RhcnQsIGxlbmd0aF0gPSBzdHJIaWdobGlnaHQ7CiAgY29uc3QgZW5kID0gc3RhcnQgKyBsZW5ndGg7CgogIGNvbnN0IHByZWZpeCA9IHN0ci5zbGljZSgwLCBzdGFydCk7CiAgY29uc3QgaGlnaGxpZ2h0ZWRDb250ZW50ID0gc3RyLnNsaWNlKHN0YXJ0LCBlbmQpOwogIGNvbnN0IHN1ZmZpeCA9IHN0ci5zbGljZShlbmQpOwogIHJldHVybiB7IHByZWZpeCwgaGlnaGxpZ2h0ZWRDb250ZW50LCBzdWZmaXggfTsKCiAgLy8gcmV0dXJuIGAke3ByZWZpeH08c3BhbiBjbGFzcz0iaGlnaGxpZ2h0Ij4ke2hpZ2hsaWdodGVkQ29udGVudH08L3NwYW4+JHtzdWZmaXh9YAp9Cg=="},{"version":3,"sources":["SearchBox.vue"],"names":[],"mappings":";AA2DA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA","file":"SearchBox.vue","sourceRoot":"node_modules/vuepress-theme-vt/plugins/fulltext-search/components","sourcesContent":["<template>\n  <div class=\"search-box\">\n    <input\n      ref=\"input\"\n      aria-label=\"Search\"\n      :value=\"query\"\n      :class=\"{ focused: focused }\"\n      :placeholder=\"placeholder\"\n      autocomplete=\"off\"\n      spellcheck=\"false\"\n      @input=\"query = $event.target.value\"\n      @focus=\"focused = true\"\n      @blur=\"focused = false\"\n      @keyup.enter=\"go(focusIndex)\"\n      @keyup.up=\"onUp\"\n      @keyup.down=\"onDown\"\n    />\n    <IconSearch class=\"search-icon\" @click.native=\"expandSearchInput\" />\n    <SearchCommand class=\"search-command\" @onCommand=\"expandSearchInput\" />\n    <ul\n      v-if=\"showSuggestions\"\n      class=\"suggestions\"\n      :class=\"{ 'align-right': alignRight }\"\n      @mouseleave=\"unfocus\"\n    >\n      <li\n        v-for=\"(s, i) in suggestions\"\n        :key=\"i\"\n        class=\"suggestion\"\n        :class=\"{ focused: i === focusIndex }\"\n        @mousedown=\"go(i)\"\n        @mouseenter=\"focus(i)\"\n      >\n        <a :href=\"s.path + s.slug\" @click.prevent>\n          <div\n            v-if=\"s.parentPageTitle\"\n            class=\"parent-page-title\"\n            v-html=\"s.parentPageTitle\"\n          />\n          <div class=\"suggestion-row\">\n            <div class=\"page-title\">{{ s.title || s.path }}</div>\n            <div class=\"suggestion-content\">\n              <!-- prettier-ignore -->\n              <div v-if=\"s.headingStr\" class=\"header\">\n                {{ s.headingDisplay.prefix }}<span class=\"highlight\">{{ s.headingDisplay.highlightedContent }}</span>{{ s.headingDisplay.suffix }}\n              </div>\n              <!-- prettier-ignore -->\n              <div v-if=\"s.contentStr\">\n                {{ s.contentDisplay.prefix }}<span class=\"highlight\">{{ s.contentDisplay.highlightedContent }}</span>{{ s.contentDisplay.suffix }}\n              </div>\n            </div>\n          </div>\n        </a>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport flexsearchSvc from \"../services/flexsearchSvc\";\nimport IconSearch from \"./IconSearch.vue\";\nimport SearchCommand from \"./SearchCommand.vue\";\n\n// see https://vuepress.vuejs.org/plugin/option-api.html#clientdynamicmodules\nimport hooks from \"@dynamic/hooks\";\n\n/* global SEARCH_MAX_SUGGESTIONS, SEARCH_PATHS, SEARCH_HOTKEYS */\nexport default {\n  name: \"SearchBox\",\n  data() {\n    return {\n      query: \"\",\n      focused: false,\n      focusIndex: 0,\n      suggestions: null,\n    };\n  },\n  components: {\n    IconSearch,\n    SearchCommand,\n  },\n  computed: {\n    queryTerms() {\n      if (!this.query) return [];\n      const result = flexsearchSvc\n        .normalizeString(this.query)\n        .split(/[^\\p{L}\\p{N}_]+/iu)\n        .filter((t) => t);\n      return result;\n    },\n    showSuggestions() {\n      return this.focused && this.suggestions && this.suggestions.length;\n    },\n\n    // make suggestions align right when there are not enough items\n    alignRight() {\n      const navCount = (this.$site.themeConfig.nav || []).length;\n      const repo = this.$site.repo ? 1 : 0;\n      return navCount + repo <= 2;\n    },\n    placeholder() {\n      return (\n        this.$localeConfig.searchPlaceholder ||\n        this.$site.themeConfig.searchPlaceholder ||\n        \"Search\"\n      );\n    },\n  },\n  watch: {\n    query() {\n      this.getSuggestions();\n    },\n    $localePath() {\n      this.bindIndexPages();\n    },\n  },\n  /* global OPTIONS */\n  mounted() {\n    this.bindIndexPages();\n    // set query from URL\n    const params = this.urlParams();\n    if (params) {\n      const query = params.get(\"query\");\n      if (query) {\n        this.query = decodeURI(query);\n        this.focused = true;\n      }\n    }\n  },\n  beforeDestroy() {\n    document.removeEventListener(\"keydown\", this.onHotkey);\n  },\n  methods: {\n    bindIndexPages() {\n      const options = OPTIONS || {};\n      const locales = this.$site.locales;\n\n      /**\n       * Handle search scope for i18n.\n       */\n      if (typeof locales === \"object\") {\n        const nonMatchedLocales = Object.keys(locales).filter(\n          (key) => key !== this.$localePath\n        );\n        const indexPages = this.$site.pages.filter((page) =>\n          nonMatchedLocales.every((locale) => {\n            if (locale === \"/\") {\n              return page.path.startsWith(this.$localePath);\n            }\n            return !page.path.startsWith(locale);\n          })\n        );\n        flexsearchSvc.buildIndex(indexPages, options);\n      } else {\n        flexsearchSvc.buildIndex(this.$site.pages, options);\n      }\n\n      document.addEventListener(\"keydown\", this.onHotkey);\n    },\n    async getSuggestions() {\n      if (!this.query || !this.queryTerms.length) {\n        this.suggestions = [];\n        return;\n      }\n      let suggestions = await flexsearchSvc.match(\n        this.query,\n        this.queryTerms,\n        this.$site.themeConfig.searchMaxSuggestions || SEARCH_MAX_SUGGESTIONS\n      );\n      if (hooks.processSuggestions) {\n        // augment suggestions with user-provided function\n        suggestions = await hooks.processSuggestions(\n          suggestions,\n          this.query,\n          this.queryTerms\n        );\n      }\n      this.suggestions = suggestions.map((s) => ({\n        ...s,\n        headingDisplay: highlight(s.headingStr, s.headingHighlight),\n        contentDisplay: highlight(s.contentStr, s.contentHighlight),\n      }));\n    },\n    getPageLocalePath(page) {\n      for (const localePath in this.$site.locales || {}) {\n        if (localePath !== \"/\" && page.path.indexOf(localePath) === 0) {\n          return localePath;\n        }\n      }\n      return \"/\";\n    },\n    isSearchable(page) {\n      let searchPaths = SEARCH_PATHS;\n      // all paths searchables\n      if (searchPaths === null) {\n        return true;\n      }\n      searchPaths = Array.isArray(searchPaths)\n        ? searchPaths\n        : new Array(searchPaths);\n      return (\n        searchPaths.filter((path) => {\n          return page.path.match(path);\n        }).length > 0\n      );\n    },\n    onHotkey(event) {\n      if (\n        event.srcElement === document.body &&\n        SEARCH_HOTKEYS.includes(event.key)\n      ) {\n        this.$refs.input.focus();\n        event.preventDefault();\n      }\n    },\n    onUp() {\n      if (this.showSuggestions) {\n        if (this.focusIndex > 0) {\n          this.focusIndex--;\n        } else {\n          this.focusIndex = this.suggestions.length - 1;\n        }\n      }\n    },\n    onDown() {\n      if (this.showSuggestions) {\n        if (this.focusIndex < this.suggestions.length - 1) {\n          this.focusIndex++;\n        } else {\n          this.focusIndex = 0;\n        }\n      }\n    },\n    go(i) {\n      if (!this.showSuggestions) {\n        return;\n      }\n      if (hooks.onGoToSuggestion) {\n        const result = hooks.onGoToSuggestion(\n          i,\n          this.suggestions[i],\n          this.query,\n          this.queryTerms\n        );\n        if (result === true) return;\n      }\n      if (this.suggestions[i].external) {\n        window.open(\n          this.suggestions[i].path + this.suggestions[i].slug,\n          \"_blank\"\n        );\n      } else {\n        this.$router.push(this.suggestions[i].path + this.suggestions[i].slug);\n        this.query = \"\";\n        this.focusIndex = 0;\n        this.focused = false;\n\n        // reset query param\n        const params = this.urlParams();\n        if (params) {\n          params.delete(\"query\");\n          const paramsString = params.toString();\n          const newState =\n            window.location.pathname + (paramsString ? `?${paramsString}` : \"\");\n          history.pushState(null, \"\", newState);\n        }\n      }\n    },\n    focus(i) {\n      this.focusIndex = i;\n    },\n    unfocus() {\n      this.focusIndex = -1;\n    },\n    urlParams() {\n      if (!window.location.search) {\n        return null;\n      }\n      return new URLSearchParams(window.location.search);\n    },\n    expandSearchInput() {\n      this.$refs.input.focus();\n      this.focused = true;\n    },\n  },\n};\n\nfunction highlight(str, strHighlight) {\n  if (!str) return {};\n  if (!strHighlight) return { prefix: str };\n  const [start, length] = strHighlight;\n  const end = start + length;\n\n  const prefix = str.slice(0, start);\n  const highlightedContent = str.slice(start, end);\n  const suffix = str.slice(end);\n  return { prefix, highlightedContent, suffix };\n\n  // return `${prefix}<span class=\"highlight\">${highlightedContent}</span>${suffix}`\n}\n</script>\n\n<style lang=\"stylus\">\n.search-box {\n  display: inline-block;\n  position: relative;\n  margin-right: 1rem;\n\n  input {\n    background-color: var(--vp-c-bg);\n    transition: background-color 0.5s;\n    cursor: text;\n    width: 10rem;\n    height: 2rem;\n    color: lighten($textColor, 25%);\n    display: inline-block;\n    border: none;\n    font-size: 0.9rem;\n    line-height: 2rem;\n    padding: 0 0.5rem 0 2rem;\n    outline: none;\n    transition: all 0.2s ease;\n    background-size: 1.2rem;\n\n    &::placeholder {\n      transition: color 0.2s ease;\n    }\n\n    &:focus {\n      cursor: auto;\n      border-color: var(--c-brand);\n\n      &::placeholder {\n        color: var(--c-brand);\n      }\n\n      &~ .search-icon {\n        color: var(--c-brand);\n      }\n    }\n\n    &.focused {\n      // border-bottom: 1px solid darken(var(--vp-c-divider-light), 10%);\n      // border: 1px solid darken(var(--vp-c-divider-light), 10%);\n      // border-radius: 1rem;\n    }\n  }\n\n  .search-icon {\n    color: var(--vp-c-text-2);\n    transition: color 0.5s;\n    fill: currentColor;\n    width: 20px;\n    height: 20px;\n    position: relative;\n    position: absolute;\n    top: 5px;\n    left: 3px;\n    margin-right: 10px;\n    cursor: pointer;\n  }\n\n  .search-command {\n    margin-right: 1rem;\n  }\n\n  .suggestions {\n    background-color: var(--vp-c-bg);\n    min-width: 500px;\n    max-width: 700px;\n    max-height: 600px;\n    position: absolute;\n    top: 2rem;\n    box-shadow: var(--vp-shadow-3);\n    border-radius: 6px;\n    padding: 0.4rem;\n    list-style-type: none;\n    overflow: scroll;\n\n    &.align-right {\n      right: 0;\n    }\n  }\n\n  .suggestion {\n    letter-spacing: 0.2px;\n    line-height: 1.4;\n    // padding 0.4rem 0.6rem\n    border-radius: 4px;\n    cursor: pointer;\n    width: 100%;\n\n    a {\n      display: block;\n      white-space: normal;\n      color: $textColor;\n      width: 100%;\n\n      .parent-page-title {\n        color: white;\n        font-weight: 600;\n        background-color: var(--c-brand);\n        padding: 5px;\n      }\n\n      .suggestion-row {\n        border-collapse: collapse;\n        width: 100%;\n        display: table;\n\n        .page-title {\n          font-size: rem;\n          width: 35%;\n          border: 1px solid $borderColor;\n          background: #f5f5f5;\n          border-left: none;\n          display: table-cell;\n          text-align: right;\n          padding: 5px;\n          font-weight: bolder;\n        }\n\n        .suggestion-content {\n          .highlight {\n            color: #000;\n            margin: 0 3px;\n            padding: 0 3px;\n            border-radius: 3px;\n            background: rgba(59, 72, 206, 0.2);\n          }\n\n          border: 1px solid $borderColor;\n          font-weight: 400;\n          border-right: none;\n          width: 65%;\n          display: table-cell;\n          padding: 10px;\n\n          .header {\n            font-weight: 600;\n          }\n        }\n      }\n    }\n\n    &.focused {\n      background-color: #f3f4f5;\n    }\n  }\n}\n\n.dark .search-box .suggestions {\n  background: #fff;\n}\n\n@media (max-width: $MQNarrow) {\n  .search-box {\n    input {\n      cursor: pointer;\n      width: 0;\n      border-color: transparent;\n      position: relative;\n\n      &:focus {\n        cursor: text;\n        left: 0;\n        width: 10rem;\n      }\n    }\n\n    .suggestions {\n      background-color: ar(--vp-c-bg);\n      min-width: 100vw;\n      max-width: 100vw;\n    }\n\n    .search-command {\n      display: none !important;\n    }\n  }\n}\n\n// Match IE11\n@media all and (-ms-high-contrast: none) {\n  .search-box input {\n    height: 2rem;\n  }\n}\n\n@media (max-width: $MQNarrow) and (min-width: $MQMobile) {\n  .search-box {\n    .suggestions {\n      left: 0;\n    }\n  }\n}\n\n@media (max-width: $MQMobile) {\n  .search-box {\n    margin-right: 0;\n\n    input {\n      left: 1rem;\n    }\n\n    .suggestions {\n      right: 0;\n    }\n  }\n}\n\n@media (max-width: $MQMobileNarrow) {\n  .search-box {\n    .suggestions {\n      width: calc(100vw - 4rem);\n    }\n\n    input:focus {\n      width: 8rem;\n    }\n  }\n}\n</style>\n"]}]}